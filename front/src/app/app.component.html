<!-- plantilla creada por codzsword -->
<!-- repositorio: https://github.com/codzsword/bootstrap-sidebar -->

<ng-container *ngIf="isLogedIn() && !tokenIsExpired(); else headerUser"> <!-- usuario identificado -->
  <div class="wrapper">
    <!-- Sidebar -->
    <aside id="sidebar" [class.collapsed]="navCollapsed">
      <div class="h-100">
        <div class="sidebar-logo">
          <a href="#">UT Riviera Maya</a>
        </div>
        <!-- Sidebar Navigation -->
        <app-sidebar></app-sidebar>
      </div>
    </aside>
    <!-- Main Component -->
    <div class="main">
      <nav class="navbar navbar-expand px-3 border-bottom d-flex justify-content-between">
        <!-- Button for sidebar toggle -->
        <button (click)="toggleNav()" class="btn" type="button">
          <span class="navbar-toggler-icon"></span>
        </button>
        
        <!-- Profile Logo -->
        <div class="profile-logo dropstart">
          <button class="btn dropdown-toggle" data-bs-toggle="dropdown">
            <i class="bi bi-person-circle"></i>
          </button>
          <ul class="dropdown-menu">
            <li class="form-check-reverse form-switch ">
              <div *ngIf="isDarkTheme; else sun">
                <label class="form-check-label" for="themeSwitch" #moon> <i class="bi bi-moon-fill"></i></label>
              </div>
              <ng-template #sun>
                <label class="form-check-label" for="themeSwitch"> <i class="bi bi-sun-fill"></i></label>
              </ng-template>
              <input class="form-check-input me-5" type="checkbox" id="themeSwitch" [(ngModel)]="isDarkTheme"
                (click)="toggleTheme()">
            </li>
            <li><a class="dropdown-item" href="#"><i class="bi bi-gear-fill"></i> configuracion</a></li>
            <li><a class="dropdown-item text-danger" (click)="logOut()"><i
                  class="bi bi-door-closed-fill"></i> Cerrar sesi√≥n</a></li>
          </ul>
        </div>
      </nav>
      <main class="content px-3 py-2">
        <div class="container-fluid">
          <div class="mb-3">
            <router-outlet></router-outlet>
          </div>
        </div>
      </main>
    </div>
  </div>
</ng-container>

<!-- usuario NO identidicado -->
<ng-template #headerUser>
  <app-header-user></app-header-user>
  <main class="content px-3 pt-2">
    <div class="container-fluid">
      <div class="mb-3">
        <router-outlet></router-outlet>
      </div>
    </div>
  </main>
</ng-template>